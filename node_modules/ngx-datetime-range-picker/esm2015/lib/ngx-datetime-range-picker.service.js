import { Injectable } from "@angular/core";
import { DEFAULT_DATE_FORMAT, NgxDatetimeRangePickerConstants as Constants } from "./ngx-datetime-range-picker.constants";
import { getNotAvailableText, cloneDeep, isNil } from "./ngx-datetime-range-picker.utils";
import { CalendarTypes } from "./interfaces";
import * as i0 from "@angular/core";
const moment = require("moment");
const DEFAULT_TIME_FORMAT = Constants.DEFAULT.TIME_FORMAT;
const MONTHS_AVAILABLE = Constants.CONSTANT.MONTHS_AVAILABLE;
const TZ_NAMES = Constants.CONSTANT.TZ_NAMES;
const DEFAULT_RANGES = Constants.DEFAULT.RANGES;
const MOMENT_CONVERSION_MAP = Constants.CONSTANT.MOMENT_CONVERSION_MAP;
export class NgxDatetimeRangePickerService {
    getDefaultOptions() {
        return cloneDeep(Constants.DEFAULT.OPTIONS);
    }
    getDefaultSettings() {
        return cloneDeep(Constants.DEFAULT.SETTINGS);
    }
    getDefaultState() {
        return cloneDeep(Constants.DEFAULT.STATE);
    }
    checkSettingsValidity(settings) {
        if (settings.type && !CalendarTypes.includes(settings.type)) {
            const errMsg = `${settings.type} is an invalid calendar type. It should one of ${[...CalendarTypes]}`;
            throw new Error(errMsg);
        }
    }
    formatDateToDefaultFormat(date, format) {
        let formattedDate = null;
        if (!date) {
            return;
        }
        if (!isNaN(Number(date))) {
            formattedDate = moment(date).format(DEFAULT_DATE_FORMAT);
        }
        else {
            formattedDate = moment(date, format).format(DEFAULT_DATE_FORMAT);
        }
        return formattedDate;
    }
    formatTimeToDefaultFormat(time) {
        let formattedTime = null;
        if (!time) {
            return;
        }
        if (time.indexOf(":") > -1) {
            if (time.indexOf("AM") > -1 || time.indexOf("PM") > -1) {
                formattedTime = moment(time, "h:mm A").format(DEFAULT_TIME_FORMAT);
            }
            else {
                formattedTime = time;
            }
        }
        else {
            console.warn(`WARN_NGX_DATETIME_RANGE_PICKER:
            The provided time is not in correct format.
            Format: HH:mm or hh:mm A
        `);
        }
        return formattedTime;
    }
    getCalendarRowNumberText(type, number) {
        return (() => {
            switch (type) {
                case "daily":
                    return `W${number}`;
                case "weekly":
                    return "";
                case "monthly":
                    return `Q${number}`;
                case "quarterly":
                    return `${number}`;
                case "yearly":
                    return "";
            }
        })();
    }
    createDefaultRanges(config) {
        const ranges = {};
        const type = config.type;
        const maxDate = cloneDeep(config.maxDate);
        DEFAULT_RANGES[type].forEach((rangeInfo) => {
            ranges[rangeInfo.label] = {
                startDate: moment(maxDate, DEFAULT_DATE_FORMAT)
                    .subtract(rangeInfo.count, MOMENT_CONVERSION_MAP[type])
                    .format(DEFAULT_DATE_FORMAT),
                endDate: maxDate
            };
        });
        ranges["Custom Range"] = { startDate: null, endDate: null };
        return ranges;
    }
    getSanitizedDateArray(config) {
        const sanitizedDateArray = [];
        const type = config.type;
        const dateArray = config.dateArray;
        const inputDateFormat = config.inputDateFormat;
        // dateArray can have nulls
        dateArray.forEach((date) => {
            if (!date) {
                return;
            }
            let format = null;
            if (isNaN(Number(date))) {
                if (inputDateFormat) {
                    format = inputDateFormat;
                }
                else {
                    format = moment(date)._f; // moment does not support this
                }
            }
            if (inputDateFormat !== moment(date)._f) {
                console.warn(`ERR_NGX_DATETIME_RANGE_PICKER:
              inputDateFormat !== dateFormat in dateArray.
              Converted dates might not be as expected
            `);
            }
            const value = format ? moment(date, format) : moment(date);
            if (value) {
                const formattedDate = value.endOf(MOMENT_CONVERSION_MAP[type]).format(DEFAULT_DATE_FORMAT);
                sanitizedDateArray.push(formattedDate);
            }
            else {
                console.warn(`ERR_NGX_DATETIME_RANGE_PICKER:
              dateArray values are in unknown format.
              Pass the format or pass the dates in known format
            `);
            }
        });
        return [...new Set(sanitizedDateArray)];
    }
    getNumberOfWeeks(date) {
        if (!date) {
            return;
        }
        const monthStart = moment(date, DEFAULT_DATE_FORMAT)
            .startOf("month")
            .day();
        const monthEnd = Number(moment(date, DEFAULT_DATE_FORMAT)
            .endOf("month")
            .format("D"));
        return Math.ceil((monthStart + monthEnd) / 7);
    }
    getYearlyWeekCount(year) {
        if (!year) {
            return;
        }
        const yearStartDate = moment(year, "YYYY")
            .startOf("year")
            .format(DEFAULT_DATE_FORMAT);
        const yearEndDate = moment(year, "YYYY")
            .endOf("year")
            .format(DEFAULT_DATE_FORMAT);
        const yearEndWeekEndDate = moment(yearEndDate, DEFAULT_DATE_FORMAT)
            .startOf("week")
            .format(DEFAULT_DATE_FORMAT);
        const yearStartWeekEndDate = moment(yearStartDate, DEFAULT_DATE_FORMAT)
            .endOf("week")
            .format(DEFAULT_DATE_FORMAT);
        const yearStartWeekNumber = this.getWeekNumber(yearStartWeekEndDate);
        const yearEndWeekNumber = this.getWeekNumber(yearEndWeekEndDate);
        return yearEndWeekNumber - yearStartWeekNumber + 1;
    }
    getMonthsAvailable(minDate, maxDate, selectedYear) {
        const months = [];
        if (!minDate || !maxDate || !selectedYear) {
            return;
        }
        minDate = moment(minDate, DEFAULT_DATE_FORMAT).startOf("month");
        maxDate = moment(maxDate, DEFAULT_DATE_FORMAT).startOf("month");
        let minDatems = moment(minDate, DEFAULT_DATE_FORMAT).valueOf();
        let maxDatems = moment(maxDate, DEFAULT_DATE_FORMAT).valueOf();
        const yearStartms = moment()
            .year(selectedYear)
            .startOf("year")
            .valueOf();
        const yearEndms = moment()
            .year(selectedYear)
            .endOf("year")
            .valueOf();
        if (minDatems < yearStartms) {
            minDatems = yearStartms;
        }
        if (maxDatems > yearEndms) {
            maxDatems = yearEndms;
        }
        let minDateMonthNumber = moment(minDatems).month();
        const diff = moment(maxDatems).diff(moment(minDatems), "months");
        const maxMonths = diff < MONTHS_AVAILABLE.length ? diff : MONTHS_AVAILABLE.length;
        for (let i = 0; i <= maxMonths; i++) {
            if (minDateMonthNumber >= MONTHS_AVAILABLE.length) {
                months.push(MONTHS_AVAILABLE[minDateMonthNumber - MONTHS_AVAILABLE.length]);
            }
            else {
                months.push(MONTHS_AVAILABLE[minDateMonthNumber]);
            }
            minDateMonthNumber++;
        }
        return months;
    }
    getYearsAvailable(config) {
        const minDate = config ? config.minDate : "";
        const maxDate = config ? config.maxDate : "";
        const years = [];
        if (minDate && maxDate) {
            const minYear = Number(this.getSelectedYear(minDate));
            const maxYear = Number(this.getSelectedYear(maxDate));
            const diff = maxYear - minYear;
            for (let i = 0; i <= diff; i++) {
                years.push(`${minYear + i}`);
            }
        }
        return years.reverse();
    }
    isDateAvailable(date, minDate, maxDate, startDate, endDate, monthStartDate, monthEndDate, config) {
        let available = false;
        const type = config.type;
        const disableWeekends = config.disableWeekends;
        const disableWeekdays = config.disableWeekdays;
        if (type === "daily") {
            minDate = minDate > monthStartDate ? minDate : monthStartDate;
            maxDate = maxDate < monthEndDate ? maxDate : monthEndDate;
        }
        if (date >= minDate && date <= maxDate) {
            available = true;
            if (available) {
                if (disableWeekends) {
                    available = !this.isWeekend(date);
                }
                if (disableWeekdays) {
                    available = !this.isWeekday(date);
                }
                if (config.dateArray.length) {
                    available = this.isInDateArray(date, config.dateArray, DEFAULT_DATE_FORMAT);
                }
            }
        }
        return available;
    }
    isDateInRange(date, minDate, maxDate, startDate, endDate, monthStartDate, monthEndDate, available, config) {
        let inRange = false;
        const type = config.type;
        const singleDatePicker = config.singleDatePicker;
        if (!singleDatePicker) {
            if (type === "daily") {
                minDate = monthStartDate;
                maxDate = monthEndDate;
            }
            if (date >= startDate && date <= endDate && date >= minDate && date <= maxDate) {
                if (available) {
                    inRange = true;
                }
            }
        }
        return inRange;
    }
    isDateActive(date, startDate, endDate, side) {
        return (date === startDate && side === "left") || (date === endDate && side === "right");
    }
    isDateToday(dateMs, config) {
        const todayDate = moment().format(DEFAULT_DATE_FORMAT);
        const type = config.type;
        const { firstDay, lastDay } = this.getFirstLastDay(todayDate, type);
        const firstDayMs = moment(firstDay, DEFAULT_DATE_FORMAT).valueOf();
        const lastDayMs = moment(lastDay, DEFAULT_DATE_FORMAT).valueOf();
        return dateMs >= firstDayMs && dateMs <= lastDayMs;
    }
    isWeekday(date, format) {
        return !this.isWeekend(date, format);
    }
    isWeekend(date, format) {
        if (!format) {
            format = null;
        }
        const day = moment(date, format).day();
        return day === 0 || day === 6;
    }
    isInDateArray(date, dateArray, format) {
        if (!format) {
            format = null;
        }
        return dateArray.find((d) => moment(d, format).valueOf() === date) !== undefined;
    }
    getCalendarRowVariables(options) {
        const variables = {
            rowNumber: "",
            columns: 0
        };
        const type = options.type;
        const monthStartWeekNumber = options.monthStartWeekNumber;
        const dateRows = options.dateRows;
        const year = `${options.year}`;
        if (type === "daily") {
            variables.rowNumber = `${monthStartWeekNumber + dateRows}`;
            variables.columns = 6;
        }
        else if (type === "weekly") {
            variables.rowNumber = ``;
            variables.columns = 6;
        }
        else if (type === "monthly") {
            variables.rowNumber = `${dateRows + 1}`;
            variables.columns = 2;
        }
        else if (type === "quarterly") {
            variables.rowNumber = year.charAt(dateRows);
            variables.columns = 0;
        }
        else if (type === "yearly") {
            variables.rowNumber = "";
            variables.columns = 0;
        }
        return variables;
    }
    getCalendarRowItemVariables(options) {
        const { type, monthStartWeekNumber, yearStartDate, year, rowItem, dateRows, columns } = options;
        const itemCount = rowItem + dateRows * columns + dateRows;
        let currentItemDate = "";
        let rowItemText = "";
        if (type === "daily") {
            if (!isNil(monthStartWeekNumber) && !isNil(dateRows) && !isNil(year)) {
                const yearStartDateDaily = moment()
                    .year(year)
                    .startOf("year")
                    .format(DEFAULT_DATE_FORMAT);
                currentItemDate = moment(yearStartDateDaily, DEFAULT_DATE_FORMAT)
                    .add(monthStartWeekNumber + dateRows - 1, "week")
                    .startOf("week")
                    .add(rowItem, "day")
                    .format(DEFAULT_DATE_FORMAT);
                rowItemText = moment(currentItemDate, DEFAULT_DATE_FORMAT).format("D");
            }
        }
        else if (type === "weekly") {
            if (!isNil(yearStartDate) && !isNil(itemCount)) {
                currentItemDate = moment(yearStartDate, DEFAULT_DATE_FORMAT)
                    .add(itemCount, "week")
                    .endOf("week")
                    .format(DEFAULT_DATE_FORMAT);
                const weekNumber = itemCount + 1;
                rowItemText = `W${weekNumber}`;
            }
        }
        else if (type === "monthly") {
            if (!isNil(itemCount) && !isNil(year)) {
                currentItemDate = moment()
                    .year(year)
                    .month(itemCount)
                    .endOf("month")
                    .format(DEFAULT_DATE_FORMAT);
                rowItemText = moment(currentItemDate, DEFAULT_DATE_FORMAT).format("MMM");
            }
        }
        else if (type === "quarterly") {
            if (!isNil(itemCount) && !isNil(year)) {
                currentItemDate = moment()
                    .year(year)
                    .quarter(itemCount + 1)
                    .endOf("quarter")
                    .format(DEFAULT_DATE_FORMAT);
                rowItemText = `Quarter ${itemCount + 1}`;
            }
        }
        const { firstDay, lastDay } = this.getFirstLastDay(currentItemDate, type);
        return {
            itemCount,
            currentItemDate,
            rowItemText,
            firstDay,
            lastDay
        };
    }
    isRowIemValid(options) {
        let valid = false;
        const type = options.type;
        const year = options.year;
        const itemCount = options.itemCount;
        const validWeekCount = this.getYearlyWeekCount(year);
        if (type === "daily") {
            valid = true;
        }
        else if (type === "weekly") {
            if (itemCount < validWeekCount) {
                valid = true;
            }
        }
        else if (type === "monthly") {
            valid = true;
        }
        else if (type === "quarterly") {
            valid = true;
        }
        return valid;
    }
    formatStartDate(config, returnFormat) {
        const startDate = config ? config.startDate : null;
        const type = config ? config.type : "";
        let formattedStartDate = null;
        if (startDate) {
            formattedStartDate = moment(startDate, DEFAULT_DATE_FORMAT)
                .startOf(MOMENT_CONVERSION_MAP[type])
                .format(returnFormat);
        }
        return formattedStartDate;
    }
    getSelectedYear(date) {
        return moment(date, DEFAULT_DATE_FORMAT).format("YYYY");
    }
    getFirstLastDay(date, type) {
        let firstDay = "";
        let lastDay = "";
        if (type === "daily") {
            firstDay = lastDay = date;
        }
        else if (type === "weekly") {
            firstDay = moment(date, DEFAULT_DATE_FORMAT)
                .startOf("week")
                .format(DEFAULT_DATE_FORMAT);
            lastDay = moment(date, DEFAULT_DATE_FORMAT)
                .endOf("week")
                .format(DEFAULT_DATE_FORMAT);
        }
        else if (type === "monthly") {
            firstDay = moment(date, DEFAULT_DATE_FORMAT)
                .startOf("month")
                .format(DEFAULT_DATE_FORMAT);
            lastDay = moment(date, DEFAULT_DATE_FORMAT)
                .endOf("month")
                .format(DEFAULT_DATE_FORMAT);
        }
        else if (type === "quarterly") {
            firstDay = moment(date, DEFAULT_DATE_FORMAT)
                .startOf("quarter")
                .format(DEFAULT_DATE_FORMAT);
            lastDay = moment(date, DEFAULT_DATE_FORMAT)
                .endOf("quarter")
                .format(DEFAULT_DATE_FORMAT);
        }
        else if (type === "yearly") {
            firstDay = moment(date, DEFAULT_DATE_FORMAT)
                .startOf("year")
                .format(DEFAULT_DATE_FORMAT);
            lastDay = moment(date, DEFAULT_DATE_FORMAT)
                .endOf("year")
                .format(DEFAULT_DATE_FORMAT);
        }
        return { firstDay, lastDay };
    }
    getZoneDate(tz, format, date) {
        let _date = moment().valueOf();
        if (date) {
            _date = moment(date, format)
                .startOf("day")
                .valueOf();
        }
        const today = new Date(_date).toLocaleString("en-US", {
            timeZone: TZ_NAMES[tz]
        });
        return moment(today, "MM/DD/YYYY, hh:mm:ss A");
    }
    getZoneToday(tz, viewDateFormat) {
        const today = this.getZoneDate(tz, viewDateFormat);
        return moment(today).format(`${viewDateFormat}  hh:mm A`);
    }
    formatToZoneDate(tz, format, date) {
        const formattedDate = this.getZoneDate(tz, format, date);
        return moment(formattedDate).format(`${format}`);
    }
    convertToViewTimeItem(item) {
        let stringified_item = item + "";
        if (stringified_item.length === 1) {
            stringified_item = `0${stringified_item}`;
        }
        return stringified_item;
    }
    getWeekNumber(date) {
        if (date) {
            const year = moment(date, "YYYY-MM-DD").year();
            const month = moment(date, "YYYY-MM-DD").month();
            const day = Number(moment(date, "YYYY-MM-DD").format("D"));
            const yearStartms = new Date(year, 0, 1);
            const datems = new Date(year, month, day);
            return Math.ceil(((datems.getTime() - yearStartms.getTime()) / 86400000 + yearStartms.getDay() + 1) / 7);
        }
        else {
            console.warn(`
        WARN_NGX_DATETIME_RANGE_PICKER | getWeekNumber:
        Invalid date
      `);
            return getNotAvailableText();
        }
    }
    iterateOverDateObj(dates, func) {
        for (const side in dates) {
            if (side) {
                const sideDates = dates[side];
                sideDates.itemRows.forEach((rows) => {
                    rows.items.forEach((rowItem) => {
                        func(rowItem);
                    });
                });
            }
        }
    }
    getCalendarColspan(type) {
        if (type === "daily") {
            return 6;
        }
        else if (type === "weekly") {
            return 8;
        }
        else if (type === "monthly") {
            return 3;
        }
        else if (type === "quarterly") {
            return 1;
        }
        else if (type === "yearly") {
            return 1;
        }
    }
    getCalendarRowItemColspan(type) {
        if (type === "monthly") {
            return 3;
        }
        else if (type === "quarterly") {
            return 6;
        }
        else if (type === "yearly") {
            return 6;
        }
    }
    getDateCharacteristics(config, state, date, month, side) {
        const currentDate = moment(date, DEFAULT_DATE_FORMAT)
            .startOf("day")
            .valueOf();
        let _date = this.formatDateToDefaultFormat(config.minDate, DEFAULT_DATE_FORMAT);
        const minDate = moment(_date, DEFAULT_DATE_FORMAT)
            .startOf("day")
            .valueOf();
        _date = this.formatDateToDefaultFormat(config.maxDate, DEFAULT_DATE_FORMAT);
        const maxDate = moment(_date, DEFAULT_DATE_FORMAT)
            .startOf("day")
            .valueOf();
        _date = this.formatDateToDefaultFormat(config.startDate, DEFAULT_DATE_FORMAT);
        const startDate = moment(_date, DEFAULT_DATE_FORMAT)
            .startOf("day")
            .valueOf();
        _date = this.formatDateToDefaultFormat(config.endDate, DEFAULT_DATE_FORMAT);
        const endDate = moment(_date, DEFAULT_DATE_FORMAT)
            .startOf("day")
            .valueOf();
        const currentMonthStartDate = moment(month, "MMM YYYY")
            .startOf("month")
            .startOf("day")
            .valueOf();
        const currentMonthEndDate = moment(month, "MMM YYYY")
            .endOf("month")
            .startOf("day")
            .valueOf();
        const available = this.isDateAvailable(currentDate, minDate, maxDate, startDate, endDate, currentMonthStartDate, currentMonthEndDate, config);
        const inRange = this.isDateInRange(currentDate, minDate, maxDate, startDate, endDate, currentMonthStartDate, currentMonthEndDate, available, config);
        const active = this.isDateActive(currentDate, startDate, endDate, side);
        const today = this.isDateToday(currentDate, config);
        // Active
        if (currentDate === startDate && side === "left") {
            state.activeStartDate = date;
        }
        else if (currentDate === endDate && side === "right") {
            state.activeEndDate = date;
        }
        return { available, inRange, active, today };
    }
    getLabelProps(state, calendarType, side) {
        let label, labelFormat, type;
        if (calendarType === "daily") {
            label = `${state.selectedMonth[side]} ${state.selectedYear[side]}`;
            labelFormat = "MMM YYYY";
            type = "month";
        }
        else {
            label = `${state.selectedYear[side]}`;
            labelFormat = "YYYY";
            type = "year";
        }
        return { label, labelFormat, type };
    }
}
NgxDatetimeRangePickerService.ɵprov = i0.ɵɵdefineInjectable({ factory: function NgxDatetimeRangePickerService_Factory() { return new NgxDatetimeRangePickerService(); }, token: NgxDatetimeRangePickerService, providedIn: "root" });
NgxDatetimeRangePickerService.decorators = [
    { type: Injectable, args: [{
                providedIn: "root"
            },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWRhdGV0aW1lLXJhbmdlLXBpY2tlci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9iaGF2aW5wYXRlbC93b3Jrc3BhY2VzL3BlcnNvbmFsL25neC1kYXRldGltZS1yYW5nZS1waWNrZXIvcHJvamVjdHMvbmd4LWRhdGV0aW1lLXJhbmdlLXBpY2tlci9zcmMvIiwic291cmNlcyI6WyJsaWIvbmd4LWRhdGV0aW1lLXJhbmdlLXBpY2tlci5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUNMLG1CQUFtQixFQUNuQiwrQkFBK0IsSUFBSSxTQUFTLEVBQzdDLE1BQU0sdUNBQXVDLENBQUM7QUFDL0MsT0FBTyxFQUFFLG1CQUFtQixFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUMxRixPQUFPLEVBVUwsYUFBYSxFQUdkLE1BQU0sY0FBYyxDQUFDOztBQUl0QixNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFFakMsTUFBTSxtQkFBbUIsR0FBRyxTQUFTLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUMxRCxNQUFNLGdCQUFnQixHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUM7QUFDN0QsTUFBTSxRQUFRLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUM7QUFDN0MsTUFBTSxjQUFjLEdBQUcsU0FBUyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDaEQsTUFBTSxxQkFBcUIsR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLHFCQUFxQixDQUFDO0FBS3ZFLE1BQU0sT0FBTyw2QkFBNkI7SUFDeEMsaUJBQWlCO1FBQ2YsT0FBTyxTQUFTLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQVksQ0FBQztJQUN6RCxDQUFDO0lBRUQsa0JBQWtCO1FB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SUFBSSxDQUFDO1NBQzlCO2FBQU0sSUFBSSxXQUFXLEtBQUssT0FBTyxJQUFJLElBQUksS0FBSyxPQUFPLEVBQUU7WUFDdEQsS0FBSyxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUM7U0FDNUI7UUFFRCxPQUFPLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLENBQUM7SUFDL0MsQ0FBQztJQUVELGFBQWEsQ0FDWCxLQUFZLEVBQ1osWUFBb0IsRUFDcEIsSUFBWTtRQUVaLElBQUksS0FBYSxFQUFFLFdBQW1CLEVBQUUsSUFBWSxDQUFDO1FBRXJELElBQUksWUFBWSxLQUFLLE9BQU8sRUFBRTtZQUM1QixLQUFLLEdBQUcsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztZQUNuRSxXQUFXLEdBQUcsVUFBVSxDQUFDO1lBQ3pCLElBQUksR0FBRyxPQUFPLENBQUM7U0FDaEI7YUFBTTtZQUNMLEtBQUssR0FBRyxHQUFHLEtBQUssQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztZQUN0QyxXQUFXLEdBQUcsTUFBTSxDQUFDO1lBQ3JCLElBQUksR0FBRyxNQUFNLENBQUM7U0FDZjtRQUVELE9BQU8sRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxDQUFDO0lBQ3RDLENBQUM7Ozs7WUFqckJGLFVBQVUsU0FBQztnQkFDVixVQUFVLEVBQUUsTUFBTTthQUNuQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHtcbiAgREVGQVVMVF9EQVRFX0ZPUk1BVCxcbiAgTmd4RGF0ZXRpbWVSYW5nZVBpY2tlckNvbnN0YW50cyBhcyBDb25zdGFudHNcbn0gZnJvbSBcIi4vbmd4LWRhdGV0aW1lLXJhbmdlLXBpY2tlci5jb25zdGFudHNcIjtcbmltcG9ydCB7IGdldE5vdEF2YWlsYWJsZVRleHQsIGNsb25lRGVlcCwgaXNOaWwgfSBmcm9tIFwiLi9uZ3gtZGF0ZXRpbWUtcmFuZ2UtcGlja2VyLnV0aWxzXCI7XG5pbXBvcnQge1xuICBPcHRpb25zLFxuICBTZXR0aW5ncyxcbiAgQ2FsZW5kYXJTaWRlcyxcbiAgU3RhdGUsXG4gIFJvd0l0ZW1WYXJpYWJsZXMsXG4gIFJvd0l0ZW1PcHRpb25zLFxuICBEYXRlQ2hhcmFjdGVyaXN0aWNzLFxuICBDb25maWcsXG4gIFJvd09wdGlvbnMsXG4gIENhbGVuZGFyVHlwZXMsXG4gIFJvd1ZhcmlhYmxlcyxcbiAgQ2FsZW5kYXJUeXBlXG59IGZyb20gXCIuL2ludGVyZmFjZXNcIjtcbmltcG9ydCB7IE1vbWVudCB9IGZyb20gXCJtb21lbnRcIjtcblxuZGVjbGFyZSB2YXIgcmVxdWlyZTogYW55O1xuY29uc3QgbW9tZW50ID0gcmVxdWlyZShcIm1vbWVudFwiKTtcblxuY29uc3QgREVGQVVMVF9USU1FX0ZPUk1BVCA9IENvbnN0YW50cy5ERUZBVUxULlRJTUVfRk9STUFUO1xuY29uc3QgTU9OVEhTX0FWQUlMQUJMRSA9IENvbnN0YW50cy5DT05TVEFOVC5NT05USFNfQVZBSUxBQkxFO1xuY29uc3QgVFpfTkFNRVMgPSBDb25zdGFudHMuQ09OU1RBTlQuVFpfTkFNRVM7XG5jb25zdCBERUZBVUxUX1JBTkdFUyA9IENvbnN0YW50cy5ERUZBVUxULlJBTkdFUztcbmNvbnN0IE1PTUVOVF9DT05WRVJTSU9OX01BUCA9IENvbnN0YW50cy5DT05TVEFOVC5NT01FTlRfQ09OVkVSU0lPTl9NQVA7XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogXCJyb290XCJcbn0pXG5leHBvcnQgY2xhc3MgTmd4RGF0ZXRpbWVSYW5nZVBpY2tlclNlcnZpY2Uge1xuICBnZXREZWZhdWx0T3B0aW9ucygpOiBPcHRpb25zIHtcbiAgICByZXR1cm4gY2xvbmVEZWVwKENvbnN0YW50cy5ERUZBVUxULk9QVElPTlMpIGFzIE9wdGlvbnM7XG4gIH1cblxuICBnZXREZWZhdWx0U2V0dGluZ3MoKTogU2V0dGluZ3Mge1xuICAgIHJldHVybiBjbG9uZURlZXAoQ29uc3RhbnRzLkRFRkFVTFQuU0VUVElOR1MpIGFzIFNldHRpbmdzO1xuICB9XG5cbiAgZ2V0RGVmYXVsdFN0YXRlKCk6IFN0YXRlIHtcbiAgICByZXR1cm4gY2xvbmVEZWVwKENvbnN0YW50cy5ERUZBVUxULlNUQVRFKSBhcyBTdGF0ZTtcbiAgfVxuXG4gIGNoZWNrU2V0dGluZ3NWYWxpZGl0eShzZXR0aW5nczogU2V0dGluZ3MpIHtcbiAgICBpZiAoc2V0dGluZ3MudHlwZSAmJiAhQ2FsZW5kYXJUeXBlcy5pbmNsdWRlcyhzZXR0aW5ncy50eXBlIGFzIENhbGVuZGFyVHlwZSkpIHtcbiAgICAgIGNvbnN0IGVyck1zZyA9IGAke3NldHRpbmdzLnR5cGV9IGlzIGFuIGludmFsaWQgY2FsZW5kYXIgdHlwZS4gSXQgc2hvdWxkIG9uZSBvZiAke1suLi5DYWxlbmRhclR5cGVzXX1gO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVyck1zZyk7XG4gICAgfVxuICB9XG5cbiAgZm9ybWF0RGF0ZVRvRGVmYXVsdEZvcm1hdChkYXRlOiBzdHJpbmcgfCBudW1iZXIsIGZvcm1hdDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBsZXQgZm9ybWF0dGVkRGF0ZSA9IG51bGw7XG4gICAgaWYgKCFkYXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFpc05hTihOdW1iZXIoZGF0ZSkpKSB7XG4gICAgICBmb3JtYXR0ZWREYXRlID0gbW9tZW50KGRhdGUpLmZvcm1hdChERUZBVUxUX0RBVEVfRk9STUFUKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9ybWF0dGVkRGF0ZSA9IG1vbWVudChkYXRlLCBmb3JtYXQpLmZvcm1hdChERUZBVUxUX0RBVEVfRk9STUFUKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZm9ybWF0dGVkRGF0ZTtcbiAgfVxuXG4gIGZvcm1hdFRpbWVUb0RlZmF1bHRGb3JtYXQodGltZTogc3RyaW5nKSB7XG4gICAgbGV0IGZvcm1hdHRlZFRpbWUgPSBudWxsO1xuICAgIGlmICghdGltZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aW1lLmluZGV4T2YoXCI6XCIpID4gLTEpIHtcbiAgICAgIGlmICh0aW1lLmluZGV4T2YoXCJBTVwiKSA+IC0xIHx8IHRpbWUuaW5kZXhPZihcIlBNXCIpID4gLTEpIHtcbiAgICAgICAgZm9ybWF0dGVkVGltZSA9IG1vbWVudCh0aW1lLCBcImg6bW0gQVwiKS5mb3JtYXQoREVGQVVMVF9USU1FX0ZPUk1BVCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3JtYXR0ZWRUaW1lID0gdGltZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgV0FSTl9OR1hfREFURVRJTUVfUkFOR0VfUElDS0VSOlxuICAgICAgICAgICAgVGhlIHByb3ZpZGVkIHRpbWUgaXMgbm90IGluIGNvcnJlY3QgZm9ybWF0LlxuICAgICAgICAgICAgRm9ybWF0OiBISDptbSBvciBoaDptbSBBXG4gICAgICAgIGBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBmb3JtYXR0ZWRUaW1lO1xuICB9XG5cbiAgZ2V0Q2FsZW5kYXJSb3dOdW1iZXJUZXh0KHR5cGUsIG51bWJlcikge1xuICAgIHJldHVybiAoKCkgPT4ge1xuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgXCJkYWlseVwiOlxuICAgICAgICAgIHJldHVybiBgVyR7bnVtYmVyfWA7XG4gICAgICAgIGNhc2UgXCJ3ZWVrbHlcIjpcbiAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgY2FzZSBcIm1vbnRobHlcIjpcbiAgICAgICAgICByZXR1cm4gYFEke251bWJlcn1gO1xuICAgICAgICBjYXNlIFwicXVhcnRlcmx5XCI6XG4gICAgICAgICAgcmV0dXJuIGAke251bWJlcn1gO1xuICAgICAgICBjYXNlIFwieWVhcmx5XCI6XG4gICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICB9XG4gICAgfSkoKTtcbiAgfVxuXG4gIGNyZWF0ZURlZmF1bHRSYW5nZXMoY29uZmlnOiBDb25maWcpOiBPYmplY3Qge1xuICAgIGNvbnN0IHJhbmdlcyA9IHt9O1xuICAgIGNvbnN0IHR5cGU6IHN0cmluZyA9IGNvbmZpZy50eXBlO1xuICAgIGNvbnN0IG1heERhdGU6IHN0cmluZyA9IGNsb25lRGVlcChjb25maWcubWF4RGF0ZSkgYXMgc3RyaW5nO1xuXG4gICAgREVGQVVMVF9SQU5HRVNbdHlwZV0uZm9yRWFjaCgocmFuZ2VJbmZvOiB7IGxhYmVsOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfSkgPT4ge1xuICAgICAgcmFuZ2VzW3JhbmdlSW5mby5sYWJlbF0gPSB7XG4gICAgICAgIHN0YXJ0RGF0ZTogbW9tZW50KG1heERhdGUsIERFRkFVTFRfREFURV9GT1JNQVQpXG4gICAgICAgICAgLnN1YnRyYWN0KHJhbmdlSW5mby5jb3VudCwgTU9NRU5UX0NPTlZFUlNJT05fTUFQW3R5cGVdKVxuICAgICAgICAgIC5mb3JtYXQoREVGQVVMVF9EQVRFX0ZPUk1BVCksXG4gICAgICAgIGVuZERhdGU6IG1heERhdGVcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICByYW5nZXNbXCJDdXN0b20gUmFuZ2VcIl0gPSB7IHN0YXJ0RGF0ZTogbnVsbCwgZW5kRGF0ZTogbnVsbCB9O1xuICAgIHJldHVybiByYW5nZXM7XG4gIH1cblxuICBnZXRTYW5pdGl6ZWREYXRlQXJyYXkoY29uZmlnOiBDb25maWcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgc2FuaXRpemVkRGF0ZUFycmF5OiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHR5cGUgPSBjb25maWcudHlwZTtcbiAgICBjb25zdCBkYXRlQXJyYXkgPSBjb25maWcuZGF0ZUFycmF5O1xuICAgIGNvbnN0IGlucHV0RGF0ZUZvcm1hdCA9IGNvbmZpZy5pbnB1dERhdGVGb3JtYXQ7XG5cbiAgICAvLyBkYXRlQXJyYXkgY2FuIGhhdmUgbnVsbHNcbiAgICBkYXRlQXJyYXkuZm9yRWFjaCgoZGF0ZSkgPT4ge1xuICAgICAgaWYgKCFkYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IGZvcm1hdDogc3RyaW5nID0gbnVsbDtcblxuICAgICAgaWYgKGlzTmFOKE51bWJlcihkYXRlKSkpIHtcbiAgICAgICAgaWYgKGlucHV0RGF0ZUZvcm1hdCkge1xuICAgICAgICAgIGZvcm1hdCA9IGlucHV0RGF0ZUZvcm1hdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3JtYXQgPSBtb21lbnQoZGF0ZSkuX2Y7IC8vIG1vbWVudCBkb2VzIG5vdCBzdXBwb3J0IHRoaXNcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaW5wdXREYXRlRm9ybWF0ICE9PSBtb21lbnQoZGF0ZSkuX2YpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGBFUlJfTkdYX0RBVEVUSU1FX1JBTkdFX1BJQ0tFUjpcbiAgICAgICAgICAgICAgaW5wdXREYXRlRm9ybWF0ICE9PSBkYXRlRm9ybWF0IGluIGRhdGVBcnJheS5cbiAgICAgICAgICAgICAgQ29udmVydGVkIGRhdGVzIG1pZ2h0IG5vdCBiZSBhcyBleHBlY3RlZFxuICAgICAgICAgICAgYFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB2YWx1ZTogTW9tZW50ID0gZm9ybWF0ID8gbW9tZW50KGRhdGUsIGZvcm1hdCkgOiBtb21lbnQoZGF0ZSk7XG5cbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gdmFsdWUuZW5kT2YoTU9NRU5UX0NPTlZFUlNJT05fTUFQW3R5cGUgYXMgc3RyaW5nXSkuZm9ybWF0KERFRkFVTFRfREFURV9GT1JNQVQpO1xuICAgICAgICBzYW5pdGl6ZWREYXRlQXJyYXkucHVzaChmb3JtYXR0ZWREYXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBgRVJSX05HWF9EQVRFVElNRV9SQU5HRV9QSUNLRVI6XG4gICAgICAgICAgICAgIGRhdGVBcnJheSB2YWx1ZXMgYXJlIGluIHVua25vd24gZm9ybWF0LlxuICAgICAgICAgICAgICBQYXNzIHRoZSBmb3JtYXQgb3IgcGFzcyB0aGUgZGF0ZXMgaW4ga25vd24gZm9ybWF0XG4gICAgICAgICAgICBgXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gWy4uLm5ldyBTZXQoc2FuaXRpemVkRGF0ZUFycmF5KV07XG4gIH1cblxuICBnZXROdW1iZXJPZldlZWtzKGRhdGUpOiBudW1iZXIge1xuICAgIGlmICghZGF0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG1vbnRoU3RhcnQ6IG51bWJlciA9IG1vbWVudChkYXRlLCBERUZBVUxUX0RBVEVfRk9STUFUKVxuICAgICAgLnN0YXJ0T2YoXCJtb250aFwiKVxuICAgICAgLmRheSgpO1xuICAgIGNvbnN0IG1vbnRoRW5kOiBudW1iZXIgPSBOdW1iZXIoXG4gICAgICBtb21lbnQoZGF0ZSwgREVGQVVMVF9EQVRFX0ZPUk1BVClcbiAgICAgICAgLmVuZE9mKFwibW9udGhcIilcbiAgICAgICAgLmZvcm1hdChcIkRcIilcbiAgICApO1xuICAgIHJldHVybiBNYXRoLmNlaWwoKG1vbnRoU3RhcnQgKyBtb250aEVuZCkgLyA3KTtcbiAgfVxuXG4gIGdldFllYXJseVdlZWtDb3VudCh5ZWFyOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGlmICgheWVhcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHllYXJTdGFydERhdGU6IHN0cmluZyA9IG1vbWVudCh5ZWFyLCBcIllZWVlcIilcbiAgICAgIC5zdGFydE9mKFwieWVhclwiKVxuICAgICAgLmZvcm1hdChERUZBVUxUX0RBVEVfRk9STUFUKTtcbiAgICBjb25zdCB5ZWFyRW5kRGF0ZTogc3RyaW5nID0gbW9tZW50KHllYXIsIFwiWVlZWVwiKVxuICAgICAgLmVuZE9mKFwieWVhclwiKVxuICAgICAgLmZvcm1hdChERUZBVUxUX0RBVEVfRk9STUFUKTtcbiAgICBjb25zdCB5ZWFyRW5kV2Vla0VuZERhdGU6IHN0cmluZyA9IG1vbWVudCh5ZWFyRW5kRGF0ZSwgREVGQVVMVF9EQVRFX0ZPUk1BVClcbiAgICAgIC5zdGFydE9mKFwid2Vla1wiKVxuICAgICAgLmZvcm1hdChERUZBVUxUX0RBVEVfRk9STUFUKTtcbiAgICBjb25zdCB5ZWFyU3RhcnRXZWVrRW5kRGF0ZTogc3RyaW5nID0gbW9tZW50KHllYXJTdGFydERhdGUsIERFRkFVTFRfREFURV9GT1JNQVQpXG4gICAgICAuZW5kT2YoXCJ3ZWVrXCIpXG4gICAgICAuZm9ybWF0KERFRkFVTFRfREFURV9GT1JNQVQpO1xuXG4gICAgY29uc3QgeWVhclN0YXJ0V2Vla051bWJlcjogbnVtYmVyID0gdGhpcy5nZXRXZWVrTnVtYmVyKHllYXJTdGFydFdlZWtFbmREYXRlKSBhcyBudW1iZXI7XG4gICAgY29uc3QgeWVhckVuZFdlZWtOdW1iZXI6IG51bWJlciA9IHRoaXMuZ2V0V2Vla051bWJlcih5ZWFyRW5kV2Vla0VuZERhdGUpIGFzIG51bWJlcjtcblxuICAgIHJldHVybiB5ZWFyRW5kV2Vla051bWJlciAtIHllYXJTdGFydFdlZWtOdW1iZXIgKyAxO1xuICB9XG5cbiAgZ2V0TW9udGhzQXZhaWxhYmxlKG1pbkRhdGUsIG1heERhdGUsIHNlbGVjdGVkWWVhcik6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBtb250aHM6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAoIW1pbkRhdGUgfHwgIW1heERhdGUgfHwgIXNlbGVjdGVkWWVhcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG1pbkRhdGUgPSBtb21lbnQobWluRGF0ZSwgREVGQVVMVF9EQVRFX0ZPUk1BVCkuc3RhcnRPZihcIm1vbnRoXCIpO1xuICAgIG1heERhdGUgPSBtb21lbnQobWF4RGF0ZSwgREVGQVVMVF9EQVRFX0ZPUk1BVCkuc3RhcnRPZihcIm1vbnRoXCIpO1xuXG4gICAgbGV0IG1pbkRhdGVtczogbnVtYmVyID0gbW9tZW50KG1pbkRhdGUsIERFRkFVTFRfREFURV9GT1JNQVQpLnZhbHVlT2YoKTtcbiAgICBsZXQgbWF4RGF0ZW1zOiBudW1iZXIgPSBtb21lbnQobWF4RGF0ZSwgREVGQVVMVF9EQVRFX0ZPUk1BVCkudmFsdWVPZigpO1xuICAgIGNvbnN0IHllYXJTdGFydG1zOiBudW1iZXIgPSBtb21lbnQoKVxuICAgICAgLnllYXIoc2VsZWN0ZWRZZWFyKVxuICAgICAgLnN0YXJ0T2YoXCJ5ZWFyXCIpXG4gICAgICAudmFsdWVPZigpO1xuICAgIGNvbnN0IHllYXJFbmRtczogbnVtYmVyID0gbW9tZW50KClcbiAgICAgIC55ZWFyKHNlbGVjdGVkWWVhcilcbiAgICAgIC5lbmRPZihcInllYXJcIilcbiAgICAgIC52YWx1ZU9mKCk7XG5cbiAgICBpZiAobWluRGF0ZW1zIDwgeWVhclN0YXJ0bXMpIHtcbiAgICAgIG1pbkRhdGVtcyA9IHllYXJTdGFydG1zO1xuICAgIH1cbiAgICBpZiAobWF4RGF0ZW1zID4geWVhckVuZG1zKSB7XG4gICAgICBtYXhEYXRlbXMgPSB5ZWFyRW5kbXM7XG4gICAgfVxuXG4gICAgbGV0IG1pbkRhdGVNb250aE51bWJlcjogbnVtYmVyID0gbW9tZW50KG1pbkRhdGVtcykubW9udGgoKTtcbiAgICBjb25zdCBkaWZmOiBudW1iZXIgPSBtb21lbnQobWF4RGF0ZW1zKS5kaWZmKG1vbWVudChtaW5EYXRlbXMpLCBcIm1vbnRoc1wiKTtcbiAgICBjb25zdCBtYXhNb250aHM6IG51bWJlciA9IGRpZmYgPCBNT05USFNfQVZBSUxBQkxFLmxlbmd0aCA/IGRpZmYgOiBNT05USFNfQVZBSUxBQkxFLmxlbmd0aDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IG1heE1vbnRoczsgaSsrKSB7XG4gICAgICBpZiAobWluRGF0ZU1vbnRoTnVtYmVyID49IE1PTlRIU19BVkFJTEFCTEUubGVuZ3RoKSB7XG4gICAgICAgIG1vbnRocy5wdXNoKE1PTlRIU19BVkFJTEFCTEVbbWluRGF0ZU1vbnRoTnVtYmVyIC0gTU9OVEhTX0FWQUlMQUJMRS5sZW5ndGhdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1vbnRocy5wdXNoKE1PTlRIU19BVkFJTEFCTEVbbWluRGF0ZU1vbnRoTnVtYmVyXSk7XG4gICAgICB9XG4gICAgICBtaW5EYXRlTW9udGhOdW1iZXIrKztcbiAgICB9XG5cbiAgICByZXR1cm4gbW9udGhzO1xuICB9XG5cbiAgZ2V0WWVhcnNBdmFpbGFibGUoY29uZmlnOiBDb25maWcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgbWluRGF0ZTogc3RyaW5nIHwgbnVtYmVyID0gY29uZmlnID8gY29uZmlnLm1pbkRhdGUgOiBcIlwiO1xuICAgIGNvbnN0IG1heERhdGU6IHN0cmluZyB8IG51bWJlciA9IGNvbmZpZyA/IGNvbmZpZy5tYXhEYXRlIDogXCJcIjtcbiAgICBjb25zdCB5ZWFyczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmIChtaW5EYXRlICYmIG1heERhdGUpIHtcbiAgICAgIGNvbnN0IG1pblllYXI6IG51bWJlciA9IE51bWJlcih0aGlzLmdldFNlbGVjdGVkWWVhcihtaW5EYXRlKSk7XG4gICAgICBjb25zdCBtYXhZZWFyOiBudW1iZXIgPSBOdW1iZXIodGhpcy5nZXRTZWxlY3RlZFllYXIobWF4RGF0ZSkpO1xuICAgICAgY29uc3QgZGlmZiA9IG1heFllYXIgLSBtaW5ZZWFyO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBkaWZmOyBpKyspIHtcbiAgICAgICAgeWVhcnMucHVzaChgJHttaW5ZZWFyICsgaX1gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHllYXJzLnJldmVyc2UoKTtcbiAgfVxuXG4gIGlzRGF0ZUF2YWlsYWJsZShcbiAgICBkYXRlOiBudW1iZXIsXG4gICAgbWluRGF0ZTogbnVtYmVyLFxuICAgIG1heERhdGU6IG51bWJlcixcbiAgICBzdGFydERhdGU6IG51bWJlcixcbiAgICBlbmREYXRlOiBudW1iZXIsXG4gICAgbW9udGhTdGFydERhdGU6IG51bWJlcixcbiAgICBtb250aEVuZERhdGU6IG51bWJlcixcbiAgICBjb25maWc6IENvbmZpZ1xuICApOiBib29sZWFuIHtcbiAgICBsZXQgYXZhaWxhYmxlID0gZmFsc2U7XG4gICAgY29uc3QgdHlwZTogc3RyaW5nID0gY29uZmlnLnR5cGU7XG4gICAgY29uc3QgZGlzYWJsZVdlZWtlbmRzOiBib29sZWFuID0gY29uZmlnLmRpc2FibGVXZWVrZW5kcztcbiAgICBjb25zdCBkaXNhYmxlV2Vla2RheXM6IGJvb2xlYW4gPSBjb25maWcuZGlzYWJsZVdlZWtkYXlzO1xuXG4gICAgaWYgKHR5cGUgPT09IFwiZGFpbHlcIikge1xuICAgICAgbWluRGF0ZSA9IG1pbkRhdGUgPiBtb250aFN0YXJ0RGF0ZSA/IG1pbkRhdGUgOiBtb250aFN0YXJ0RGF0ZTtcbiAgICAgIG1heERhdGUgPSBtYXhEYXRlIDwgbW9udGhFbmREYXRlID8gbWF4RGF0ZSA6IG1vbnRoRW5kRGF0ZTtcbiAgICB9XG5cbiAgICBpZiAoZGF0ZSA+PSBtaW5EYXRlICYmIGRhdGUgPD0gbWF4RGF0ZSkge1xuICAgICAgYXZhaWxhYmxlID0gdHJ1ZTtcblxuICAgICAgaWYgKGF2YWlsYWJsZSkge1xuICAgICAgICBpZiAoZGlzYWJsZVdlZWtlbmRzKSB7XG4gICAgICAgICAgYXZhaWxhYmxlID0gIXRoaXMuaXNXZWVrZW5kKGRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXNhYmxlV2Vla2RheXMpIHtcbiAgICAgICAgICBhdmFpbGFibGUgPSAhdGhpcy5pc1dlZWtkYXkoZGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbmZpZy5kYXRlQXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICAgYXZhaWxhYmxlID0gdGhpcy5pc0luRGF0ZUFycmF5KGRhdGUsIGNvbmZpZy5kYXRlQXJyYXksIERFRkFVTFRfREFURV9GT1JNQVQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhdmFpbGFibGU7XG4gIH1cblxuICBpc0RhdGVJblJhbmdlKFxuICAgIGRhdGU6IG51bWJlcixcbiAgICBtaW5EYXRlOiBudW1iZXIsXG4gICAgbWF4RGF0ZTogbnVtYmVyLFxuICAgIHN0YXJ0RGF0ZTogbnVtYmVyLFxuICAgIGVuZERhdGU6IG51bWJlcixcbiAgICBtb250aFN0YXJ0RGF0ZTogbnVtYmVyLFxuICAgIG1vbnRoRW5kRGF0ZTogbnVtYmVyLFxuICAgIGF2YWlsYWJsZTogYm9vbGVhbixcbiAgICBjb25maWc6IENvbmZpZ1xuICApOiBib29sZWFuIHtcbiAgICBsZXQgaW5SYW5nZSA9IGZhbHNlO1xuICAgIGNvbnN0IHR5cGU6IHN0cmluZyA9IGNvbmZpZy50eXBlO1xuICAgIGNvbnN0IHNpbmdsZURhdGVQaWNrZXI6IGJvb2xlYW4gPSBjb25maWcuc2luZ2xlRGF0ZVBpY2tlcjtcblxuICAgIGlmICghc2luZ2xlRGF0ZVBpY2tlcikge1xuICAgICAgaWYgKHR5cGUgPT09IFwiZGFpbHlcIikge1xuICAgICAgICBtaW5EYXRlID0gbW9udGhTdGFydERhdGU7XG4gICAgICAgIG1heERhdGUgPSBtb250aEVuZERhdGU7XG4gICAgICB9XG4gICAgICBpZiAoZGF0ZSA+PSBzdGFydERhdGUgJiYgZGF0ZSA8PSBlbmREYXRlICYmIGRhdGUgPj0gbWluRGF0ZSAmJiBkYXRlIDw9IG1heERhdGUpIHtcbiAgICAgICAgaWYgKGF2YWlsYWJsZSkge1xuICAgICAgICAgIGluUmFuZ2UgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpblJhbmdlO1xuICB9XG5cbiAgaXNEYXRlQWN0aXZlKGRhdGU6IG51bWJlciwgc3RhcnREYXRlOiBudW1iZXIsIGVuZERhdGU6IG51bWJlciwgc2lkZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChkYXRlID09PSBzdGFydERhdGUgJiYgc2lkZSA9PT0gXCJsZWZ0XCIpIHx8IChkYXRlID09PSBlbmREYXRlICYmIHNpZGUgPT09IFwicmlnaHRcIik7XG4gIH1cblxuICBpc0RhdGVUb2RheShkYXRlTXM6IG51bWJlciwgY29uZmlnKTogYm9vbGVhbiB7XG4gICAgY29uc3QgdG9kYXlEYXRlOiBzdHJpbmcgPSBtb21lbnQoKS5mb3JtYXQoREVGQVVMVF9EQVRFX0ZPUk1BVCk7XG4gICAgY29uc3QgdHlwZTogc3RyaW5nID0gY29uZmlnLnR5cGU7XG4gICAgY29uc3QgeyBmaXJzdERheSwgbGFzdERheSB9ID0gdGhpcy5nZXRGaXJzdExhc3REYXkodG9kYXlEYXRlLCB0eXBlKTtcbiAgICBjb25zdCBmaXJzdERheU1zOiBudW1iZXIgPSBtb21lbnQoZmlyc3REYXksIERFRkFVTFRfREFURV9GT1JNQVQpLnZhbHVlT2YoKTtcbiAgICBjb25zdCBsYXN0RGF5TXM6IG51bWJlciA9IG1vbWVudChsYXN0RGF5LCBERUZBVUxUX0RBVEVfRk9STUFUKS52YWx1ZU9mKCk7XG4gICAgcmV0dXJuIGRhdGVNcyA+PSBmaXJzdERheU1zICYmIGRhdGVNcyA8PSBsYXN0RGF5TXM7XG4gIH1cblxuICBpc1dlZWtkYXkoZGF0ZTogbnVtYmVyLCBmb3JtYXQ/OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMuaXNXZWVrZW5kKGRhdGUsIGZvcm1hdCk7XG4gIH1cblxuICBpc1dlZWtlbmQoZGF0ZTogbnVtYmVyLCBmb3JtYXQ/OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoIWZvcm1hdCkge1xuICAgICAgZm9ybWF0ID0gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgZGF5ID0gbW9tZW50KGRhdGUsIGZvcm1hdCkuZGF5KCk7XG4gICAgcmV0dXJuIGRheSA9PT0gMCB8fCBkYXkgPT09IDY7XG4gIH1cblxuICBpc0luRGF0ZUFycmF5KGRhdGU6IG51bWJlciwgZGF0ZUFycmF5OiBhbnlbXSwgZm9ybWF0Pzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKCFmb3JtYXQpIHtcbiAgICAgIGZvcm1hdCA9IG51bGw7XG4gICAgfVxuICAgIHJldHVybiBkYXRlQXJyYXkuZmluZCgoZCkgPT4gbW9tZW50KGQsIGZvcm1hdCkudmFsdWVPZigpID09PSBkYXRlKSAhPT0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZ2V0Q2FsZW5kYXJSb3dWYXJpYWJsZXMob3B0aW9uczogUm93T3B0aW9ucyk6IFJvd1ZhcmlhYmxlcyB7XG4gICAgY29uc3QgdmFyaWFibGVzOiBSb3dWYXJpYWJsZXMgPSB7XG4gICAgICByb3dOdW1iZXI6IFwiXCIsXG4gICAgICBjb2x1bW5zOiAwXG4gICAgfTtcbiAgICBjb25zdCB0eXBlOiBzdHJpbmcgPSBvcHRpb25zLnR5cGU7XG4gICAgY29uc3QgbW9udGhTdGFydFdlZWtOdW1iZXI6IG51bWJlciA9IG9wdGlvbnMubW9udGhTdGFydFdlZWtOdW1iZXI7XG4gICAgY29uc3QgZGF0ZVJvd3M6IG51bWJlciA9IG9wdGlvbnMuZGF0ZVJvd3M7XG4gICAgY29uc3QgeWVhciA9IGAke29wdGlvbnMueWVhcn1gO1xuXG4gICAgaWYgKHR5cGUgPT09IFwiZGFpbHlcIikge1xuICAgICAgdmFyaWFibGVzLnJvd051bWJlciA9IGAke21vbnRoU3RhcnRXZWVrTnVtYmVyICsgZGF0ZVJvd3N9YDtcbiAgICAgIHZhcmlhYmxlcy5jb2x1bW5zID0gNjtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwid2Vla2x5XCIpIHtcbiAgICAgIHZhcmlhYmxlcy5yb3dOdW1iZXIgPSBgYDtcbiAgICAgIHZhcmlhYmxlcy5jb2x1bW5zID0gNjtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwibW9udGhseVwiKSB7XG4gICAgICB2YXJpYWJsZXMucm93TnVtYmVyID0gYCR7ZGF0ZVJvd3MgKyAxfWA7XG4gICAgICB2YXJpYWJsZXMuY29sdW1ucyA9IDI7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcInF1YXJ0ZXJseVwiKSB7XG4gICAgICB2YXJpYWJsZXMucm93TnVtYmVyID0geWVhci5jaGFyQXQoZGF0ZVJvd3MpO1xuICAgICAgdmFyaWFibGVzLmNvbHVtbnMgPSAwO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJ5ZWFybHlcIikge1xuICAgICAgdmFyaWFibGVzLnJvd051bWJlciA9IFwiXCI7XG4gICAgICB2YXJpYWJsZXMuY29sdW1ucyA9IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhcmlhYmxlcztcbiAgfVxuXG4gIGdldENhbGVuZGFyUm93SXRlbVZhcmlhYmxlcyhvcHRpb25zOiBSb3dJdGVtT3B0aW9ucyk6IFJvd0l0ZW1WYXJpYWJsZXMge1xuICAgIGNvbnN0IHsgdHlwZSwgbW9udGhTdGFydFdlZWtOdW1iZXIsIHllYXJTdGFydERhdGUsIHllYXIsIHJvd0l0ZW0sIGRhdGVSb3dzLCBjb2x1bW5zIH0gPSBvcHRpb25zO1xuXG4gICAgY29uc3QgaXRlbUNvdW50OiBudW1iZXIgPSByb3dJdGVtICsgZGF0ZVJvd3MgKiBjb2x1bW5zICsgZGF0ZVJvd3M7XG4gICAgbGV0IGN1cnJlbnRJdGVtRGF0ZSA9IFwiXCI7XG4gICAgbGV0IHJvd0l0ZW1UZXh0ID0gXCJcIjtcblxuICAgIGlmICh0eXBlID09PSBcImRhaWx5XCIpIHtcbiAgICAgIGlmICghaXNOaWwobW9udGhTdGFydFdlZWtOdW1iZXIpICYmICFpc05pbChkYXRlUm93cykgJiYgIWlzTmlsKHllYXIpKSB7XG4gICAgICAgIGNvbnN0IHllYXJTdGFydERhdGVEYWlseSA9IG1vbWVudCgpXG4gICAgICAgICAgLnllYXIoeWVhcilcbiAgICAgICAgICAuc3RhcnRPZihcInllYXJcIilcbiAgICAgICAgICAuZm9ybWF0KERFRkFVTFRfREFURV9GT1JNQVQpO1xuICAgICAgICBjdXJyZW50SXRlbURhdGUgPSBtb21lbnQoeWVhclN0YXJ0RGF0ZURhaWx5LCBERUZBVUxUX0RBVEVfRk9STUFUKVxuICAgICAgICAgIC5hZGQobW9udGhTdGFydFdlZWtOdW1iZXIgKyBkYXRlUm93cyAtIDEsIFwid2Vla1wiKVxuICAgICAgICAgIC5zdGFydE9mKFwid2Vla1wiKVxuICAgICAgICAgIC5hZGQocm93SXRlbSwgXCJkYXlcIilcbiAgICAgICAgICAuZm9ybWF0KERFRkFVTFRfREFURV9GT1JNQVQpO1xuICAgICAgICByb3dJdGVtVGV4dCA9IG1vbWVudChjdXJyZW50SXRlbURhdGUsIERFRkFVTFRfREFURV9GT1JNQVQpLmZvcm1hdChcIkRcIik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcIndlZWtseVwiKSB7XG4gICAgICBpZiAoIWlzTmlsKHllYXJTdGFydERhdGUpICYmICFpc05pbChpdGVtQ291bnQpKSB7XG4gICAgICAgIGN1cnJlbnRJdGVtRGF0ZSA9IG1vbWVudCh5ZWFyU3RhcnREYXRlLCBERUZBVUxUX0RBVEVfRk9STUFUKVxuICAgICAgICAgIC5hZGQoaXRlbUNvdW50LCBcIndlZWtcIilcbiAgICAgICAgICAuZW5kT2YoXCJ3ZWVrXCIpXG4gICAgICAgICAgLmZvcm1hdChERUZBVUxUX0RBVEVfRk9STUFUKTtcbiAgICAgICAgY29uc3Qgd2Vla051bWJlcjogYW55ID0gaXRlbUNvdW50ICsgMTtcbiAgICAgICAgcm93SXRlbVRleHQgPSBgVyR7d2Vla051bWJlcn1gO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJtb250aGx5XCIpIHtcbiAgICAgIGlmICghaXNOaWwoaXRlbUNvdW50KSAmJiAhaXNOaWwoeWVhcikpIHtcbiAgICAgICAgY3VycmVudEl0ZW1EYXRlID0gbW9tZW50KClcbiAgICAgICAgICAueWVhcih5ZWFyKVxuICAgICAgICAgIC5tb250aChpdGVtQ291bnQpXG4gICAgICAgICAgLmVuZE9mKFwibW9udGhcIilcbiAgICAgICAgICAuZm9ybWF0KERFRkFVTFRfREFURV9GT1JNQVQpO1xuICAgICAgICByb3dJdGVtVGV4dCA9IG1vbWVudChjdXJyZW50SXRlbURhdGUsIERFRkFVTFRfREFURV9GT1JNQVQpLmZvcm1hdChcIk1NTVwiKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwicXVhcnRlcmx5XCIpIHtcbiAgICAgIGlmICghaXNOaWwoaXRlbUNvdW50KSAmJiAhaXNOaWwoeWVhcikpIHtcbiAgICAgICAgY3VycmVudEl0ZW1EYXRlID0gbW9tZW50KClcbiAgICAgICAgICAueWVhcih5ZWFyKVxuICAgICAgICAgIC5xdWFydGVyKGl0ZW1Db3VudCArIDEpXG4gICAgICAgICAgLmVuZE9mKFwicXVhcnRlclwiKVxuICAgICAgICAgIC5mb3JtYXQoREVGQVVMVF9EQVRFX0ZPUk1BVCk7XG4gICAgICAgIHJvd0l0ZW1UZXh0ID0gYFF1YXJ0ZXIgJHtpdGVtQ291bnQgKyAxfWA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgeyBmaXJzdERheSwgbGFzdERheSB9ID0gdGhpcy5nZXRGaXJzdExhc3REYXkoY3VycmVudEl0ZW1EYXRlLCB0eXBlKTtcblxuICAgIHJldHVybiB7XG4gICAgICBpdGVtQ291bnQsXG4gICAgICBjdXJyZW50SXRlbURhdGUsXG4gICAgICByb3dJdGVtVGV4dCxcbiAgICAgIGZpcnN0RGF5LFxuICAgICAgbGFzdERheVxuICAgIH07XG4gIH1cblxuICBpc1Jvd0llbVZhbGlkKG9wdGlvbnM6IFJvd09wdGlvbnMpOiBib29sZWFuIHtcbiAgICBsZXQgdmFsaWQgPSBmYWxzZTtcbiAgICBjb25zdCB0eXBlOiBzdHJpbmcgPSBvcHRpb25zLnR5cGU7XG4gICAgY29uc3QgeWVhcjogc3RyaW5nID0gb3B0aW9ucy55ZWFyO1xuICAgIGNvbnN0IGl0ZW1Db3VudDogbnVtYmVyID0gb3B0aW9ucy5pdGVtQ291bnQ7XG4gICAgY29uc3QgdmFsaWRXZWVrQ291bnQ6IG51bWJlciA9IHRoaXMuZ2V0WWVhcmx5V2Vla0NvdW50KHllYXIpO1xuXG4gICAgaWYgKHR5cGUgPT09IFwiZGFpbHlcIikge1xuICAgICAgdmFsaWQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJ3ZWVrbHlcIikge1xuICAgICAgaWYgKGl0ZW1Db3VudCA8IHZhbGlkV2Vla0NvdW50KSB7XG4gICAgICAgIHZhbGlkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwibW9udGhseVwiKSB7XG4gICAgICB2YWxpZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcInF1YXJ0ZXJseVwiKSB7XG4gICAgICB2YWxpZCA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbGlkO1xuICB9XG5cbiAgZm9ybWF0U3RhcnREYXRlKGNvbmZpZzogQ29uZmlnLCByZXR1cm5Gb3JtYXQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3Qgc3RhcnREYXRlOiBzdHJpbmcgfCBudW1iZXIgPSBjb25maWcgPyBjb25maWcuc3RhcnREYXRlIDogbnVsbDtcbiAgICBjb25zdCB0eXBlOiBzdHJpbmcgPSBjb25maWcgPyBjb25maWcudHlwZSA6IFwiXCI7XG4gICAgbGV0IGZvcm1hdHRlZFN0YXJ0RGF0ZTogc3RyaW5nID0gbnVsbDtcblxuICAgIGlmIChzdGFydERhdGUpIHtcbiAgICAgIGZvcm1hdHRlZFN0YXJ0RGF0ZSA9IG1vbWVudChzdGFydERhdGUsIERFRkFVTFRfREFURV9GT1JNQVQpXG4gICAgICAgIC5zdGFydE9mKE1PTUVOVF9DT05WRVJTSU9OX01BUFt0eXBlXSlcbiAgICAgICAgLmZvcm1hdChyZXR1cm5Gb3JtYXQpO1xuICAgIH1cblxuICAgIHJldHVybiBmb3JtYXR0ZWRTdGFydERhdGU7XG4gIH1cblxuICBnZXRTZWxlY3RlZFllYXIoZGF0ZTogc3RyaW5nIHwgbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gbW9tZW50KGRhdGUsIERFRkFVTFRfREFURV9GT1JNQVQpLmZvcm1hdChcIllZWVlcIik7XG4gIH1cblxuICBnZXRGaXJzdExhc3REYXkoZGF0ZTogc3RyaW5nLCB0eXBlOiBzdHJpbmcpOiB7IGZpcnN0RGF5OiBzdHJpbmc7IGxhc3REYXk6IHN0cmluZyB9IHtcbiAgICBsZXQgZmlyc3REYXkgPSBcIlwiO1xuICAgIGxldCBsYXN0RGF5ID0gXCJcIjtcblxuICAgIGlmICh0eXBlID09PSBcImRhaWx5XCIpIHtcbiAgICAgIGZpcnN0RGF5ID0gbGFzdERheSA9IGRhdGU7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcIndlZWtseVwiKSB7XG4gICAgICBmaXJzdERheSA9IG1vbWVudChkYXRlLCBERUZBVUxUX0RBVEVfRk9STUFUKVxuICAgICAgICAuc3RhcnRPZihcIndlZWtcIilcbiAgICAgICAgLmZvcm1hdChERUZBVUxUX0RBVEVfRk9STUFUKTtcbiAgICAgIGxhc3REYXkgPSBtb21lbnQoZGF0ZSwgREVGQVVMVF9EQVRFX0ZPUk1BVClcbiAgICAgICAgLmVuZE9mKFwid2Vla1wiKVxuICAgICAgICAuZm9ybWF0KERFRkFVTFRfREFURV9GT1JNQVQpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJtb250aGx5XCIpIHtcbiAgICAgIGZpcnN0RGF5ID0gbW9tZW50KGRhdGUsIERFRkFVTFRfREFURV9GT1JNQVQpXG4gICAgICAgIC5zdGFydE9mKFwibW9udGhcIilcbiAgICAgICAgLmZvcm1hdChERUZBVUxUX0RBVEVfRk9STUFUKTtcbiAgICAgIGxhc3REYXkgPSBtb21lbnQoZGF0ZSwgREVGQVVMVF9EQVRFX0ZPUk1BVClcbiAgICAgICAgLmVuZE9mKFwibW9udGhcIilcbiAgICAgICAgLmZvcm1hdChERUZBVUxUX0RBVEVfRk9STUFUKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwicXVhcnRlcmx5XCIpIHtcbiAgICAgIGZpcnN0RGF5ID0gbW9tZW50KGRhdGUsIERFRkFVTFRfREFURV9GT1JNQVQpXG4gICAgICAgIC5zdGFydE9mKFwicXVhcnRlclwiKVxuICAgICAgICAuZm9ybWF0KERFRkFVTFRfREFURV9GT1JNQVQpO1xuICAgICAgbGFzdERheSA9IG1vbWVudChkYXRlLCBERUZBVUxUX0RBVEVfRk9STUFUKVxuICAgICAgICAuZW5kT2YoXCJxdWFydGVyXCIpXG4gICAgICAgIC5mb3JtYXQoREVGQVVMVF9EQVRFX0ZPUk1BVCk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcInllYXJseVwiKSB7XG4gICAgICBmaXJzdERheSA9IG1vbWVudChkYXRlLCBERUZBVUxUX0RBVEVfRk9STUFUKVxuICAgICAgICAuc3RhcnRPZihcInllYXJcIilcbiAgICAgICAgLmZvcm1hdChERUZBVUxUX0RBVEVfRk9STUFUKTtcbiAgICAgIGxhc3REYXkgPSBtb21lbnQoZGF0ZSwgREVGQVVMVF9EQVRFX0ZPUk1BVClcbiAgICAgICAgLmVuZE9mKFwieWVhclwiKVxuICAgICAgICAuZm9ybWF0KERFRkFVTFRfREFURV9GT1JNQVQpO1xuICAgIH1cblxuICAgIHJldHVybiB7IGZpcnN0RGF5LCBsYXN0RGF5IH07XG4gIH1cblxuICBnZXRab25lRGF0ZSh0ejogc3RyaW5nLCBmb3JtYXQ6IHN0cmluZywgZGF0ZT86IHN0cmluZyk6IE1vbWVudCB7XG4gICAgbGV0IF9kYXRlOiBudW1iZXIgPSBtb21lbnQoKS52YWx1ZU9mKCk7XG5cbiAgICBpZiAoZGF0ZSkge1xuICAgICAgX2RhdGUgPSBtb21lbnQoZGF0ZSwgZm9ybWF0KVxuICAgICAgICAuc3RhcnRPZihcImRheVwiKVxuICAgICAgICAudmFsdWVPZigpO1xuICAgIH1cblxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoX2RhdGUpLnRvTG9jYWxlU3RyaW5nKFwiZW4tVVNcIiwge1xuICAgICAgdGltZVpvbmU6IFRaX05BTUVTW3R6XVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG1vbWVudCh0b2RheSwgXCJNTS9ERC9ZWVlZLCBoaDptbTpzcyBBXCIpO1xuICB9XG5cbiAgZ2V0Wm9uZVRvZGF5KHR6OiBzdHJpbmcsIHZpZXdEYXRlRm9ybWF0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHRvZGF5OiBNb21lbnQgPSB0aGlzLmdldFpvbmVEYXRlKHR6LCB2aWV3RGF0ZUZvcm1hdCk7XG4gICAgcmV0dXJuIG1vbWVudCh0b2RheSkuZm9ybWF0KGAke3ZpZXdEYXRlRm9ybWF0fSAgaGg6bW0gQWApO1xuICB9XG5cbiAgZm9ybWF0VG9ab25lRGF0ZSh0ejogc3RyaW5nLCBmb3JtYXQ6IHN0cmluZywgZGF0ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBmb3JtYXR0ZWREYXRlOiBNb21lbnQgPSB0aGlzLmdldFpvbmVEYXRlKHR6LCBmb3JtYXQsIGRhdGUpO1xuICAgIHJldHVybiBtb21lbnQoZm9ybWF0dGVkRGF0ZSkuZm9ybWF0KGAke2Zvcm1hdH1gKTtcbiAgfVxuXG4gIGNvbnZlcnRUb1ZpZXdUaW1lSXRlbShpdGVtOiBzdHJpbmcgfCBudW1iZXIpOiBzdHJpbmcge1xuICAgIGxldCBzdHJpbmdpZmllZF9pdGVtID0gaXRlbSArIFwiXCI7XG4gICAgaWYgKHN0cmluZ2lmaWVkX2l0ZW0ubGVuZ3RoID09PSAxKSB7XG4gICAgICBzdHJpbmdpZmllZF9pdGVtID0gYDAke3N0cmluZ2lmaWVkX2l0ZW19YDtcbiAgICB9XG4gICAgcmV0dXJuIHN0cmluZ2lmaWVkX2l0ZW07XG4gIH1cblxuICBnZXRXZWVrTnVtYmVyKGRhdGU6IHN0cmluZyk6IHN0cmluZyB8IG51bWJlciB7XG4gICAgaWYgKGRhdGUpIHtcbiAgICAgIGNvbnN0IHllYXI6IG51bWJlciA9IG1vbWVudChkYXRlLCBcIllZWVktTU0tRERcIikueWVhcigpO1xuICAgICAgY29uc3QgbW9udGg6IG51bWJlciA9IG1vbWVudChkYXRlLCBcIllZWVktTU0tRERcIikubW9udGgoKTtcbiAgICAgIGNvbnN0IGRheTogbnVtYmVyID0gTnVtYmVyKG1vbWVudChkYXRlLCBcIllZWVktTU0tRERcIikuZm9ybWF0KFwiRFwiKSk7XG5cbiAgICAgIGNvbnN0IHllYXJTdGFydG1zOiBEYXRlID0gbmV3IERhdGUoeWVhciwgMCwgMSk7XG4gICAgICBjb25zdCBkYXRlbXM6IERhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTtcbiAgICAgIHJldHVybiBNYXRoLmNlaWwoKChkYXRlbXMuZ2V0VGltZSgpIC0geWVhclN0YXJ0bXMuZ2V0VGltZSgpKSAvIDg2NDAwMDAwICsgeWVhclN0YXJ0bXMuZ2V0RGF5KCkgKyAxKSAvIDcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oYFxuICAgICAgICBXQVJOX05HWF9EQVRFVElNRV9SQU5HRV9QSUNLRVIgfCBnZXRXZWVrTnVtYmVyOlxuICAgICAgICBJbnZhbGlkIGRhdGVcbiAgICAgIGApO1xuICAgICAgcmV0dXJuIGdldE5vdEF2YWlsYWJsZVRleHQoKTtcbiAgICB9XG4gIH1cblxuICBpdGVyYXRlT3ZlckRhdGVPYmooZGF0ZXM6IENhbGVuZGFyU2lkZXMsIGZ1bmMpIHtcbiAgICBmb3IgKGNvbnN0IHNpZGUgaW4gZGF0ZXMpIHtcbiAgICAgIGlmIChzaWRlKSB7XG4gICAgICAgIGNvbnN0IHNpZGVEYXRlcyA9IGRhdGVzW3NpZGVdO1xuICAgICAgICBzaWRlRGF0ZXMuaXRlbVJvd3MuZm9yRWFjaCgocm93cykgPT4ge1xuICAgICAgICAgIHJvd3MuaXRlbXMuZm9yRWFjaCgocm93SXRlbSkgPT4ge1xuICAgICAgICAgICAgZnVuYyhyb3dJdGVtKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0Q2FsZW5kYXJDb2xzcGFuKHR5cGU6IHN0cmluZyk6IG51bWJlciB7XG4gICAgaWYgKHR5cGUgPT09IFwiZGFpbHlcIikge1xuICAgICAgcmV0dXJuIDY7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcIndlZWtseVwiKSB7XG4gICAgICByZXR1cm4gODtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwibW9udGhseVwiKSB7XG4gICAgICByZXR1cm4gMztcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwicXVhcnRlcmx5XCIpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJ5ZWFybHlcIikge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICB9XG5cbiAgZ2V0Q2FsZW5kYXJSb3dJdGVtQ29sc3Bhbih0eXBlOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGlmICh0eXBlID09PSBcIm1vbnRobHlcIikge1xuICAgICAgcmV0dXJuIDM7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcInF1YXJ0ZXJseVwiKSB7XG4gICAgICByZXR1cm4gNjtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwieWVhcmx5XCIpIHtcbiAgICAgIHJldHVybiA2O1xuICAgIH1cbiAgfVxuXG4gIGdldERhdGVDaGFyYWN0ZXJpc3RpY3MoY29uZmlnOiBDb25maWcsIHN0YXRlOiBTdGF0ZSwgZGF0ZTogc3RyaW5nLCBtb250aDogc3RyaW5nLCBzaWRlOiBzdHJpbmcpOiBEYXRlQ2hhcmFjdGVyaXN0aWNzIHtcbiAgICBjb25zdCBjdXJyZW50RGF0ZTogbnVtYmVyID0gbW9tZW50KGRhdGUsIERFRkFVTFRfREFURV9GT1JNQVQpXG4gICAgICAuc3RhcnRPZihcImRheVwiKVxuICAgICAgLnZhbHVlT2YoKTtcblxuICAgIGxldCBfZGF0ZTogc3RyaW5nID0gdGhpcy5mb3JtYXREYXRlVG9EZWZhdWx0Rm9ybWF0KGNvbmZpZy5taW5EYXRlLCBERUZBVUxUX0RBVEVfRk9STUFUKTtcbiAgICBjb25zdCBtaW5EYXRlOiBudW1iZXIgPSBtb21lbnQoX2RhdGUsIERFRkFVTFRfREFURV9GT1JNQVQpXG4gICAgICAuc3RhcnRPZihcImRheVwiKVxuICAgICAgLnZhbHVlT2YoKTtcblxuICAgIF9kYXRlID0gdGhpcy5mb3JtYXREYXRlVG9EZWZhdWx0Rm9ybWF0KGNvbmZpZy5tYXhEYXRlLCBERUZBVUxUX0RBVEVfRk9STUFUKTtcbiAgICBjb25zdCBtYXhEYXRlOiBudW1iZXIgPSBtb21lbnQoX2RhdGUsIERFRkFVTFRfREFURV9GT1JNQVQpXG4gICAgICAuc3RhcnRPZihcImRheVwiKVxuICAgICAgLnZhbHVlT2YoKTtcblxuICAgIF9kYXRlID0gdGhpcy5mb3JtYXREYXRlVG9EZWZhdWx0Rm9ybWF0KGNvbmZpZy5zdGFydERhdGUsIERFRkFVTFRfREFURV9GT1JNQVQpO1xuICAgIGNvbnN0IHN0YXJ0RGF0ZTogbnVtYmVyID0gbW9tZW50KF9kYXRlLCBERUZBVUxUX0RBVEVfRk9STUFUKVxuICAgICAgLnN0YXJ0T2YoXCJkYXlcIilcbiAgICAgIC52YWx1ZU9mKCk7XG5cbiAgICBfZGF0ZSA9IHRoaXMuZm9ybWF0RGF0ZVRvRGVmYXVsdEZvcm1hdChjb25maWcuZW5kRGF0ZSwgREVGQVVMVF9EQVRFX0ZPUk1BVCk7XG4gICAgY29uc3QgZW5kRGF0ZTogbnVtYmVyID0gbW9tZW50KF9kYXRlLCBERUZBVUxUX0RBVEVfRk9STUFUKVxuICAgICAgLnN0YXJ0T2YoXCJkYXlcIilcbiAgICAgIC52YWx1ZU9mKCk7XG5cbiAgICBjb25zdCBjdXJyZW50TW9udGhTdGFydERhdGU6IG51bWJlciA9IG1vbWVudChtb250aCwgXCJNTU0gWVlZWVwiKVxuICAgICAgLnN0YXJ0T2YoXCJtb250aFwiKVxuICAgICAgLnN0YXJ0T2YoXCJkYXlcIilcbiAgICAgIC52YWx1ZU9mKCk7XG4gICAgY29uc3QgY3VycmVudE1vbnRoRW5kRGF0ZTogbnVtYmVyID0gbW9tZW50KG1vbnRoLCBcIk1NTSBZWVlZXCIpXG4gICAgICAuZW5kT2YoXCJtb250aFwiKVxuICAgICAgLnN0YXJ0T2YoXCJkYXlcIilcbiAgICAgIC52YWx1ZU9mKCk7XG5cbiAgICBjb25zdCBhdmFpbGFibGU6IGJvb2xlYW4gPSB0aGlzLmlzRGF0ZUF2YWlsYWJsZShcbiAgICAgIGN1cnJlbnREYXRlLFxuICAgICAgbWluRGF0ZSxcbiAgICAgIG1heERhdGUsXG4gICAgICBzdGFydERhdGUsXG4gICAgICBlbmREYXRlLFxuICAgICAgY3VycmVudE1vbnRoU3RhcnREYXRlLFxuICAgICAgY3VycmVudE1vbnRoRW5kRGF0ZSxcbiAgICAgIGNvbmZpZ1xuICAgICk7XG4gICAgY29uc3QgaW5SYW5nZTogYm9vbGVhbiA9IHRoaXMuaXNEYXRlSW5SYW5nZShcbiAgICAgIGN1cnJlbnREYXRlLFxuICAgICAgbWluRGF0ZSxcbiAgICAgIG1heERhdGUsXG4gICAgICBzdGFydERhdGUsXG4gICAgICBlbmREYXRlLFxuICAgICAgY3VycmVudE1vbnRoU3RhcnREYXRlLFxuICAgICAgY3VycmVudE1vbnRoRW5kRGF0ZSxcbiAgICAgIGF2YWlsYWJsZSxcbiAgICAgIGNvbmZpZ1xuICAgICk7XG4gICAgY29uc3QgYWN0aXZlOiBib29sZWFuID0gdGhpcy5pc0RhdGVBY3RpdmUoY3VycmVudERhdGUsIHN0YXJ0RGF0ZSwgZW5kRGF0ZSwgc2lkZSk7XG4gICAgY29uc3QgdG9kYXk6IGJvb2xlYW4gPSB0aGlzLmlzRGF0ZVRvZGF5KGN1cnJlbnREYXRlLCBjb25maWcpO1xuXG4gICAgLy8gQWN0aXZlXG4gICAgaWYgKGN1cnJlbnREYXRlID09PSBzdGFydERhdGUgJiYgc2lkZSA9PT0gXCJsZWZ0XCIpIHtcbiAgICAgIHN0YXRlLmFjdGl2ZVN0YXJ0RGF0ZSA9IGRhdGU7XG4gICAgfSBlbHNlIGlmIChjdXJyZW50RGF0ZSA9PT0gZW5kRGF0ZSAmJiBzaWRlID09PSBcInJpZ2h0XCIpIHtcbiAgICAgIHN0YXRlLmFjdGl2ZUVuZERhdGUgPSBkYXRlO1xuICAgIH1cblxuICAgIHJldHVybiB7IGF2YWlsYWJsZSwgaW5SYW5nZSwgYWN0aXZlLCB0b2RheSB9O1xuICB9XG5cbiAgZ2V0TGFiZWxQcm9wcyhcbiAgICBzdGF0ZTogU3RhdGUsXG4gICAgY2FsZW5kYXJUeXBlOiBzdHJpbmcsXG4gICAgc2lkZTogc3RyaW5nXG4gICk6IHsgbGFiZWw6IHN0cmluZzsgbGFiZWxGb3JtYXQ6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0ge1xuICAgIGxldCBsYWJlbDogc3RyaW5nLCBsYWJlbEZvcm1hdDogc3RyaW5nLCB0eXBlOiBzdHJpbmc7XG5cbiAgICBpZiAoY2FsZW5kYXJUeXBlID09PSBcImRhaWx5XCIpIHtcbiAgICAgIGxhYmVsID0gYCR7c3RhdGUuc2VsZWN0ZWRNb250aFtzaWRlXX0gJHtzdGF0ZS5zZWxlY3RlZFllYXJbc2lkZV19YDtcbiAgICAgIGxhYmVsRm9ybWF0ID0gXCJNTU0gWVlZWVwiO1xuICAgICAgdHlwZSA9IFwibW9udGhcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgbGFiZWwgPSBgJHtzdGF0ZS5zZWxlY3RlZFllYXJbc2lkZV19YDtcbiAgICAgIGxhYmVsRm9ybWF0ID0gXCJZWVlZXCI7XG4gICAgICB0eXBlID0gXCJ5ZWFyXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgbGFiZWwsIGxhYmVsRm9ybWF0LCB0eXBlIH07XG4gIH1cbn1cbiJdfQ==